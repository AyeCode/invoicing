"use strict";jQuery(function($){Vue.component("gpselect2",{props:["value"],template:"#gpselect2-template",mounted:function(){var vm=this;$(this.$el).select2().val(this.value).trigger("change.select2").on("change",function(e){vm.$emit("input",jQuery(e.currentTarget).val())})},watch:{value:function(value){jQuery(this.$el).val(value).trigger("change.select2")}},destroyed:function(){$(this.$el).off().select2("destroy")}});window.getpaid_form_builder=new Vue({el:"#wpinv-form-builder",data:wp.hooks.applyFilters("getpaid_form_builder_data",$.extend(true,{active_tab:"new_item",active_form_element:null,last_dropped:null},wpinvPaymentFormAdmin)),computed:wp.hooks.applyFilters("getpaid_form_builder_computed",{elementString:function elementString(){return JSON.stringify(this.form_elements)},itemString:function itemString(){return JSON.stringify(this.form_items)},gridWidth:{get:function get(){if(this.active_form_element.grid_width){return this.active_form_element.grid_width}return"full"},set:function set(grid_width){this.$set(this.active_form_element,"grid_width",grid_width)}}}),methods:wp.hooks.applyFilters("getpaid_form_builder_methods",{grid_class:function grid_class(field){var grid_class="col-12";if("half"==field.grid_width){grid_class="col-12 col-md-6"}if("third"==field.grid_width){grid_class="col-12 col-md-4"}return grid_class},visible_fields:function visible_fields(fields){return fields.filter(function(field){return field.visible})},highlightField:function highlightField(field){this.active_tab="edit_item";this.active_form_element=field;return field},getNewFieldData:function getNewFieldData(field){var rand=Math.random()+this.form_elements.length;var key=rand.toString(36).replace(/[^a-z]+/g,"");var new_field=$.extend(true,{},field.defaults);new_field.id=key;new_field.name=key;new_field.type=field.type;return new_field},addDraggedField:function addDraggedField(field){this.last_dropped=this.getNewFieldData(field);return this.last_dropped},addField:function addField(field){this.form_elements.push(this.highlightField(this.getNewFieldData(field)))},highlightLastDroppedField:function highlightLastDroppedField(){this.highlightField(this.last_dropped)},removeField:function removeField(field){var index=this.form_elements.indexOf(field);if(index>-1){this.form_elements.splice(index,1);this.active_tab="new_item";this.active_form_element=null}},removeItem:function removeItem(item){var index=this.form_items.indexOf(item);var items=this.form_items;if(index>-1){$(".wpinv-available-items-editor.item_"+item.id).find(".wpinv-available-items-editor-body").slideToggle(400);$(".wpinv-available-items-editor.item_"+item.id).fadeOut(420,function(){items.splice(index,1)})}},formatPrice:function formatPrice(price){var formated=parseFloat(price);if(isNaN(formated)){formated=0}return this.addCurrency(this.addCommas(this.addDecimals(formated)))},addDecimals:function addDecimals(price){var decimals=price.toFixed(this.decimals)+"";return decimals.replace(".",this.decimals_sep)},addCommas:function addCommas(price){var parts=price.toString().split(this.decimals_sep);parts[0]=parts[0].replace(/\B(?=(\d{3})+(?!\d))/g,this.thousands_sep);return parts.join(this.decimals_sep)},addCurrency:function addCurrency(price){if("left"==this.position){return this.currency+""+price}return price+""+this.currency},addSelectedItem:function addSelectedItem(event){var select=$(event.target).parent().find("select");var selected_item=$(select).select2("data")[0];if(!selected_item.form_data){return}var exists=false;selected_item=selected_item.form_data;$(this.form_items).each(function(index,item){if(item.id&&item.id==selected_item.id){exists=true}});if(!exists){this.form_items.push(selected_item)}$(select).val("").trigger("change")},togglePanel:function togglePanel(id){var parent=$(".wpinv-available-items-editor.item_"+id);parent.find(".wpinv-available-items-editor-body").slideToggle(400,function(){$("html, body").animate({},1e3)});parent.toggleClass("active");parent.find(".wpinv-available-items-editor-header > .toggle-icon .dashicons-arrow-down").toggle();parent.find(".wpinv-available-items-editor-header > .toggle-icon .dashicons-arrow-up").toggle()},toggleAddressPanel:function togglePanel(event){var parent=$(event.target).closest(".wpinv-form-address-field-editor");parent.find(".wpinv-form-address-field-editor-editor-body").slideToggle(400);parent.toggleClass("active");parent.find(".wpinv-available-items-editor-header > .toggle-icon .dashicons-arrow-down").toggle();parent.find(".wpinv-available-items-editor-header > .toggle-icon .dashicons-arrow-up").toggle()}}),filters:wp.hooks.applyFilters("getpaid_form_builder_filters",{optionize:function(value){if(!value)return"";value=value.toString().split("|").splice(0,1).join("");return value.toString().trim()},formatMergeTag:function(value){if(!value)return"";return"{"+value.toString().trim().toLowerCase().replace(/[^a-z0-9]+/g,"_")+"}"}}),directives:wp.hooks.applyFilters("getpaid_form_builder_directives",{initItemSearch:{inserted:function(el){getpaid.init_select2_item_search(el,$(el).parent());$(el).on("change",function(){$(el).trigger("itemselected")})}}})});$(document).ready(function(){if(wpinvPaymentFormAdmin&&wpinvPaymentFormAdmin.is_default){$("#minor-publishing").hide();$("#delete-action").hide();$("#wpinv-payment-form-shortcode").hide()}$(".post-type-wpi_payment_form #visibility").hide();$(".post-type-wpi_payment_form .misc-pub-curtime").hide()})});